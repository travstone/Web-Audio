<html>
	<head>
		<meta charset="utf-8">
		<meta http-equiv="X-UA-Compatible" content="IE=edge">
		<title>Audio Peaks</title>
		<meta name="viewport" content="width=device-width, initial-scale=1">
		<script type="text/javascript" src="js/config.js"></script>		
		<script data-main="js/app" src="js/libs/require/require.js"></script>
		<link rel="stylesheet" type="text/css" href="mods/waveform/waveform.css">
		<link rel="stylesheet" type="text/css" href="mods/rta/rta.css">
		<link rel="stylesheet" type="text/css" href="mods/peaks/peaks.css">

	</head>
	<body>

		<div>
			<h1>Audio Peaks, Waveform &amp; Real-Time Analyzer</h1>
			<p><a href="index.html">Home</a></p>

			<div class="audio-visualizer">

				<div class="audio-controls">
					<label>Track: </label>
					<div id="track-select"></div>
					
					<audio controls id="track-player">
					</audio>

					<span id="loading-indicator">Loading...</span>
				</div>
			<div id="ac1">
				<div class="plot-container">
					<span class="label-left">Left</span>
					<span class="label-right">Right</span>
					<svg class="waveform-container" preserveAspectRatio="none" viewbox="0 -100 12000 200" >

						<path fill="none" stroke="#000000" class="wfPath" id="waveform-path-left" d=""></path>
						<path fill="none" stroke="#000000" class="wfPath" id="waveform-path-right" d=""></path>
						<path fill="none" stroke="rgb(0,0,255)" id="zeroLine" d="M0, 0 L12000, 0" stroke-width="0.5"></path>
						<path fill="none" stroke="rgba(255,0,0,0.6)" id="playHead" d="M0, -100 L0, 100" stroke-width="25"></path>

					</svg>
				</div>
			</div>


				<div class="wave-container">
					<svg id="ac" class="waveform-container" preserveAspectRatio="none" viewbox="0 0 1024 256">
						<defs>
							<filter id="glow">
							    <feGaussianBlur stdDeviation="10" result="coloredBlur"/>
							    <feMerge>
							        <feMergeNode in="coloredBlur"/>
							        <feMergeNode in="SourceGraphic"/>
							    </feMerge>
							</filter>
						</defs>
						<path stroke-width="0.5" fill="" stroke="rgba(255, 96, 96, 0.5)" id="zeroLine" d="M0, 128 L1024, 128"></path>
						<path stroke-width="3" fill="none" stroke="rgba(133, 255, 235, 0.8)" id="waveform-path" d="" filter="url(#glow)"></path>
					</svg>
					<div class="waveform-controls">
						<label>Size: <input type="range" min="0.2" max="8" step="0.1" id="stroke" value="3" /></label>
						<label>Brightness: <input type="range" min="0.1" max="1" step="0.1" id="brightness" value="0.8" /></label>
					</div>
				</div>
				<div class="graph-container">
					<svg id="gc" class="graph" preserveAspectRatio="none" viewbox="0 0 1024 256"></svg>
					<span class="gfm gfm-low">20Hz</span>
					<span class="gfm gfm-hi">20kHz</span>
				</div>

			</div>

		</div>

		<script type="text/javascript">
			//requirejs([jquery','../mods/trackSelect/trackSelect','../mods/peaks/peaks','../mods/waveform/waveform','../mods/rta/rta'], function( jquery, trackSelect, peaks, waveform, rta ) {
			requirejs(['jquery','trackSelect','peaks','waveform','rta'], function( $, trackSelect, peaks, waveform, rta ) {
				"use strict";
				console.log($);
			    peaks.init();
			    waveform.init();
			    rta.init();
			    var tsDelegate = function() {
			    	peaks.initAudio();
			    	waveform.reset();
			    	rta.reset();
			    }
			    var $player = $('#track-player');
			    trackSelect.init($('#track-select'), $player, tsDelegate);
			});
		</script>

	</body>

</html>